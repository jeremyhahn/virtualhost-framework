if(!window.qxsettings)qxsettings={};if(qxsettings["qx.version"]==undefined)qxsettings["qx.version"]="0.0";if(qxsettings["qx.isSource"]==undefined)qxsettings["qx.isSource"]=false;if(!window.qxvariants)qxvariants={};qx.Class.define("packages.com.makeabyte.vhf.ldapbrowser.ui.properties.Repository",{extend:vhf.Main,properties:{WireFrame:{init:vhf.Main.getInstance()},RepoPropWin:{},RepoObj:{},NewValues:{init:[]},Callback:{}},construct:function(obj){this.setRepoObj(obj[0]);this.setCallback(obj[1]);this.setRepoPropWin(new qx.ui.window.Window("Repository Properties","icon/16/"+this.getAppIcon()));this.getRepoPropWin().set({showMinimize:true,allowMinimize:false,allowMaximize:true});this.getRepoPropWin().setSpace(200,400,0,450);this.getRepoPropWin().removeAll();var ico1=new qx.ui.basic.Atom("Repository Properties","icon/32/apps/internet-download-manager.png");with(ico1){setTop(5);setLeft(5);setIconPosition("left");}var tv1=new qx.ui.pageview.tabview.TabView;tv1.set({left:4,top:40,right:4,bottom:50});var t1=new qx.ui.pageview.tabview.Button("General","icon/16/mimetypes/text-ascii.png");t1.setChecked(true);tv1.getBar().add(t1);var p1=new qx.ui.pageview.tabview.Page(t1);tv1.getPane().add(p1);var cl1=new qx.ui.layout.CanvasLayout;cl1.setTop(0);cl1.setLeft(0);cl1.setWidth("100%");cl1.setHeight("100%");cl1.setBackgroundColor("white");cl1.setPaddingLeft(0);var lblRepo=new qx.ui.basic.Atom("Repository Name");lblRepo.setHorizontalChildrenAlign("right");lblRepo.set({top:30,left:10});var txtRepo=new qx.ui.form.TextField();txtRepo.set({top:30,right:30,width:'60%',value:this.getRepoObj().cn[0]});txtRepo.setReadOnly(true);var txtTip1="This is the friendly name which is displayed in reference to this repository.<br><b>Example: </b>P2P Hosting Network";var tipIcon1=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon1.set({top:30,right:10});var tooltipBtn1=new qx.ui.basic.Atom(txtTip1);var tt1=new qx.ui.popup.ToolTip(txtTip1);tipIcon1.setToolTip(tt1);var lblURL=new qx.ui.basic.Atom("Repository URL");lblURL.setHorizontalChildrenAlign("right");lblURL.set({top:55,left:10});var txtURL=new qx.ui.form.TextField();txtURL.set({top:55,right:30,width:'60%',value:this.getRepoObj().repositoryurl[0]});var txtTip2="The uniform resource locator (URL) where the repository if hosted.<br><b>Example: http://vhf.makeabyte.com/repo";var tipIcon2=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon2.set({top:55,right:10});var tooltipBtn2=new qx.ui.basic.Atom(txtTip2);var tt2=new qx.ui.popup.ToolTip(txtTip2);tipIcon2.setToolTip(tt2);var btnCancel=new qx.ui.form.Button("Cancel","icon/16/actions/dialog-cancel.png");btnCancel.addEventListener("execute",function(e){this.getRepoPropWin().close();ico1.setLabel("");},this);btnCancel.set({bottom:10,right:65});var btnOK=new qx.ui.form.Button("OK","icon/16/actions/dialog-ok.png");btnOK.addEventListener("execute",function(e){this.getRepoPropWin().close();if(this.getRepoObj().repositoryurl[0]!=txtURL.getValue()){var callback=qx.lang.Function.bind(this.__saveDataHandler,this);this.getWireFrame()._callAsyncRpc(callback,"core.rpc.API","invoke","REPOSITORY","update",this.getRepoObj().dn,txtURL.getValue());}},this);btnOK.set({bottom:10,right:10});p1.add(cl1);cl1.add(lblRepo,txtRepo,tipIcon1);cl1.add(lblURL,txtURL,tipIcon2);this.getRepoPropWin().add(btnOK,btnCancel);this.getRepoPropWin().add(ico1,tv1);var lblCopyright=new qx.ui.basic.Label(this.getWireFrame().getCopyright());lblCopyright.set({bottom:15,left:10});this.getRepoPropWin().add(lblCopyright);this.getRepoPropWin().open();this.getWireFrame()._addToWorkspace(this.getRepoPropWin());},members:{__saveDataHandler:function(result,ex,id){if(ex!=null){this.getWireFrame()._showAlertDialog("error",ex.toString(),"RPC ERROR");this.getWireFrame()._setStatusText("RPC ERROR!");}if(result){var parentDn=this.getRepoObj().dn.replace("cn="+this.getRepoObj().cn[0]+",","");this.getCallback()(parentDn);this.getWireFrame()._setStatusText("Ready");}},terminate:function(){this.base(arguments);}}});
