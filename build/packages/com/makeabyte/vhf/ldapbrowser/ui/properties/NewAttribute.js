if(!window.qxsettings)qxsettings={};if(qxsettings["qx.version"]==undefined)qxsettings["qx.version"]="0.0";if(qxsettings["qx.isSource"]==undefined)qxsettings["qx.isSource"]=false;if(!window.qxvariants)qxvariants={};qx.Class.define("packages.com.makeabyte.vhf.ldapbrowser.ui.properties.NewAttribute",{extend:vhf.Main,properties:{WireFrame:{init:vhf.Main.getInstance()},NewAttribWin:{},ObjectDn:{},Table:{},TableRowData:{}},construct:function(obj){this.setObjectDn(obj[0]);this.setTable(obj[1]);this.setTableRowData(obj[2]);this.setNewAttribWin(new qx.ui.window.Window("New Attribute","icon/16/"+this.getAppIcon()));this.getNewAttribWin().set({showMinimize:true,allowMinimize:false,allowMaximize:true});this.getNewAttribWin().setSpace(200,400,150,200);this.getWireFrame()._addToWorkspace(this.getNewAttribWin());var at1=new qx.ui.basic.Atom("Enter the attribute name and value.","icon/32/mimetypes/text-x-generic.png");at1.set({top:5,left:5});var lblName=new qx.ui.basic.Atom('Name');lblName.setHorizontalChildrenAlign('right');lblName.set({top:60,left:30,width:'10%'});var txtName=new qx.ui.form.TextField();txtName.set({top:60,right:30,width:'70%'});var txtTip1="The name of the attribute.<br><b>Example:</b> description";var tipIcon1=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon1.set({top:60,right:10});var tooltipBtn1=new qx.ui.basic.Atom(txtTip1);var tt1=new qx.ui.popup.ToolTip(txtTip1);tipIcon1.setToolTip(tt1);var lblValue=new qx.ui.basic.Atom('Value');lblValue.setHorizontalChildrenAlign('right');lblValue.set({top:85,left:30,width:'10%'});var txtValue=new qx.ui.form.TextField();txtValue.set({top:85,right:30,width:'70%'});var txtTip2="The value of the attribute.<br><b>Example:</b> VP, Enterprise Development";var tipIcon2=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon2.set({top:85,right:10});var tooltipBtn=new qx.ui.basic.Atom(txtTip2);var tt2=new qx.ui.popup.ToolTip(txtTip2);tipIcon2.setToolTip(tt2);var btnOK=new qx.ui.form.Button("OK","icon/16/actions/dialog-ok.png");var btnCancel=new qx.ui.form.Button("Cancel","icon/16/actions/dialog-cancel.png");btnOK.set({bottom:10,right:10});btnCancel.set({bottom:10,right:60});btnOK.addEventListener("execute",function(e){if(!txtName.getValue().length||!txtValue.getValue().length)this.getWireFrame()._showAlertDialog("error","Please enter both an attribute name and value.","Error",null);else this.__addAttrib(txtName.getValue(),txtValue.getValue());},this);btnCancel.addEventListener("execute",function(e){this.getNewAttribWin().close();},this);this.getNewAttribWin().add(at1,lblName,txtName,lblValue,txtValue,tipIcon1,tipIcon2,btnOK,btnCancel);this.getNewAttribWin().open();},members:{__addAttrib:function(name,value){this.getWireFrame()._setStatusText("Creating new attribute...");var callback=qx.lang.Function.bind(this.__addAttribHandler,this);this.getWireFrame()._callAsyncRpc(callback,"core.rpc.API","invoke","LDAP","addAttrib",this.getObjectDn(),name,value);},__addAttribHandler:function(result,ex,id){if(ex!=null){this.getWireFrame()._showAlertDialog("error",ex.toString(),"RPC Error",null);this.getWireFrame()._setStatusText("RPC Error!");return false;}if(result){this.getTableRowData().push([result.attribute,result.value]);this.getTable().getTableModel().setData(this.getTableRowData());this.getNewAttribWin().close();this.getWireFrame()._setStatusText("RPC Error!");}},close:function(){this.base(arguments);},terminate:function(){this.base(arguments);}}});
