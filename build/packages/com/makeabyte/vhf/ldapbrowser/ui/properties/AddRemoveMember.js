if(!window.qxsettings)qxsettings={};if(qxsettings["qx.version"]==undefined)qxsettings["qx.version"]="0.0";if(qxsettings["qx.isSource"]==undefined)qxsettings["qx.isSource"]=false;if(!window.qxvariants)qxvariants={};qx.Class.define("packages.org.p2phost.ldapbrowser.ui.contextmenu.AddRemoveMember",{extend:p2phost.Main,properties:{Parent:{init:p2phost.Main.getInstance()},Table:{},TableRowData:{},ParentDn:{}},construct:function(arrData){this.setTable(arrData[0]);this.setTableRowData(arrData[1]);this.setParentDn(arrData[2]);this.main();},members:{main:function(){var add=new qx.client.Command;add.addEventListener("execute",function(e){this.loadProperties("MemberChooser",Array(this.getTable(),this.getTableRowData()));},this);var del=new qx.client.Command;del.addEventListener("execute",function(e){var table=e.getData().getParentMenu().getOpener();var selectedObjects=table.getSelectionModel().getSelectedRanges();for(var i=0;i<selectedObjects.length;i++){var confirmCallback=qx.lang.Function.bind(this.__removeMember,this);this.getParent()._showConfirmDialog("Are you sure you want to delete "+table.getTableModel().getValue(0,selectedObjects[i].minIndex)+"?","LDAP Object Deletion",confirmCallback,null);}},this);var cmenu=new qx.ui.menu.Menu;var m_0=new qx.ui.menu.Button("New","icon/16/actions/edit-add.png",add);var m_1=new qx.ui.menu.Button("Delete","icon/16/actions/edit-delete.png",del);cmenu.add(m_0,m_1);cmenu.addToDocument();var tbl=this.getTable();tbl.setContextMenu(cmenu);tbl.addEventListener("cellContextmenu",function(e){this.getContextMenu().setLeft(e.getClientX());this.getContextMenu().setTop(e.getClientY());this.getContextMenu().setOpener(tbl);this.getContextMenu().show();},tbl);},loadProperties:function(type,obj){this.getParent()._loadPackage("packages.org.p2phost.ldapbrowser.ui.properties."+type,obj);},__removeMember:function(){var selectedObjects=this.getTable().getSelectionModel().getSelectedRanges();for(var i=0;i<selectedObjects.length;i++)this.getTable().getTableModel().removeRows(selectedObjects[i].minIndex,1);},terminate:function(){this.base(arguments);}}});
