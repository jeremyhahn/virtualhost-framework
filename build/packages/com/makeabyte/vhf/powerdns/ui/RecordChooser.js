if(!window.qxsettings)qxsettings={};if(qxsettings["qx.version"]==undefined)qxsettings["qx.version"]="0.0";if(qxsettings["qx.isSource"]==undefined)qxsettings["qx.isSource"]=false;if(!window.qxvariants)qxvariants={};qx.Class.define("packages.com.makeabyte.vhf.powerdns.ui.RecordChooser",{extend:vhf.Main,properties:{WireFrame:{init:vhf.Main.getInstance()},RecChooserWin:{},ObjectDn:{},Callback:{}},construct:function(obj){this.setObjectDn(obj[0]);this.setCallback(obj[1]);this.main();},members:{main:function(){this.setRecChooserWin(new qx.ui.window.Window("Record Chooser","icon/16/"+this.getWireFrame().getAppIcon()));this.getRecChooserWin().set({showMinimize:true,allowMinimize:false,allowMaximize:true});this.getRecChooserWin().setSpace(200,400,150,200);this.getRecChooserWin().removeAll();var at1=new qx.ui.basic.Atom("Please enter and confirm the new password.","icon/32/mimetypes/text-ascii.png");at1.setLocation(4,4);var lblType=new qx.ui.basic.Atom('Type');lblType.setHorizontalChildrenAlign('right');lblType.set({top:60,left:30,width:'10%'});var txtType=new qx.ui.form.ComboBox();txtType.set({top:60,right:30,width:'70%'});RecType=[];RecType[0]="ARecord";RecType[1]="MXRecord";RecType[2]="CNAMERecord";RecType[3]="WKSRecord";RecType[4]="PTRRecord";RecType[5]="HINFORecord";RecType[6]="MINFORecord";RecType[7]="TXTRecord";RecType[8]="RPRecord";RecType[9]="AFSDBRecord";RecType[10]="SIGRecord";RecType[11]="KEYRecord";RecType[12]="GPOSRecord";RecType[13]="AAAARecord";RecType[14]="LOCRecord";RecType[15]="NXTRecord";RecType[16]="SRVRecord";RecType[17]="NAPTRRecord";RecType[18]="KXRecord";RecType[19]="CERTRecord";RecType[20]="A6Record";RecType[21]="DNAMERecord";RecType[22]="APLRecord";RecType[23]="DSRecord";RecType[24]="SSHFPRecord";RecType[25]="IPSECKEYRecord";RecType[26]="RRSIGRecord";RecType[27]="NSECRecord";RecType[28]="DNSKEYRecord";RecType[29]="DHCIDRecord";RecType[30]="SPFRecord";RecType.sort();for(var i=0;i<RecType.length;i++){var item=new qx.ui.form.ListItem(RecType[i]);txtType.add(item);}var txtTip="Select the type of record you wish to add from the drop down.<br><b>Example:</b> aRecord";var tipIcon=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon.set({top:60,right:10});var tooltipBtn=new qx.ui.basic.Atom(txtTip);var tt1=new qx.ui.popup.ToolTip(txtTip);tipIcon.setToolTip(tt1);var lblValue=new qx.ui.basic.Atom('Value');lblValue.setHorizontalChildrenAlign('right');lblValue.set({top:85,left:30,width:'10%'});var txtValue=new qx.ui.form.TextField();txtValue.set({top:85,right:30,width:'70%'});var txtTip2="Enter the value for this record per RFC for the particular record you are adding.<br><b>Example:</b> 1.2.3.4";var tipIcon2=new qx.ui.basic.Atom("","icon/16/apps/accessories-tip.png");tipIcon2.set({top:85,right:10});var tooltipBtn=new qx.ui.basic.Atom(txtTip2);var tt2=new qx.ui.popup.ToolTip(txtTip2);tipIcon2.setToolTip(tt2);var btnOK=new qx.ui.form.Button("OK","icon/16/actions/dialog-ok.png");var btnCancel=new qx.ui.form.Button("Cancel","icon/16/actions/dialog-cancel.png");btnOK.set({bottom:10,right:10});btnCancel.set({bottom:10,right:60});btnOK.addEventListener("execute",function(e){if(!txtValue.getValue().length){this.getWireFrame()._showAlertDialog("error","You must enter a value.","New DNS Record",null);return;}var json='['+'{ "name" : "dn", "dn" : "'+this.getObjectDn()+'"},'+'{ "name" : "'+txtType.getValue()+'", "'+txtType.getValue()+'" : "'+txtValue.getValue()+'"}'+']';var callback=new qx.lang.Function.bind(this.__newRecordHandler,this);this.getWireFrame()._callAsyncRpc(callback,"core.rpc.API","invoke","DNS","addRecord",json);},this);btnCancel.addEventListener("execute",function(e){this.getRecChooserWin().close();},this);this.getRecChooserWin().add(at1,lblType,txtType,lblValue,txtValue,tipIcon,tipIcon2,btnOK,btnCancel);var lblCopyright=new qx.ui.basic.Label(this.getWireFrame().getCopyright());lblCopyright.set({bottom:15,left:10});this.getRecChooserWin().add(lblCopyright);this.getRecChooserWin().open();this.getWireFrame()._addToWorkspace(this.getRecChooserWin());},__newRecordHandler:function(result,ex,id){if(ex!=null){this.getWireFrame()._showAlertDialog("error",ex,"RPC Error");this.getWireFrame()._setStatusText("RPC Error!");}if(result){this.getCallback()();this.getRecChooserWin().close();}},close:function(){this.base(arguments);},terminate:function(){this.base(arguments);}}});
